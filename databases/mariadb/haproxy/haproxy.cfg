global
    log stdout format raw daemon
    stats socket /var/run/haproxy/admin.sock mode 600 level admin

defaults
    log global
    mode tcp
    timeout connect 5s
    timeout client 1m
    timeout server 1m

listen mariadb_cluster
    bind *:3306
    mode tcp
    option tcp-check
    balance roundrobin
    server primary mariadb-primary:3306 check inter 3s fall 3 rise 2
    server replica mariadb-replica:3306 check inter 3s fall 3 rise 2 backup
